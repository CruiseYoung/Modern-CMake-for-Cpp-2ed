


创建顶级软件并非易事。在线研究这个主题的开发者难以确定哪些建议是当前的，哪些方法已经更新，或已经有更好的实践方式。此外，大多数资源以混乱的方式解释过程，缺乏适当的背景、上下文和结构。

《Modern CMake for C++》提供了一个端到端的指南，通过全面处理C++解决方案的构建，提供了更简单的体验。它不仅教你如何在项目中使用CMake，还强调了如何使项目保持可维护性、优雅和简洁。该指南会引导你自动化完成许多项目中的常见任务，包括构建、测试和打包。

本书还会指导如何组织源目录、构建目标和创建包。随着了解的深入，将学习编译和链接可执行文件和库，详细理解这些过程，并优化每个步骤以获得最佳结果。此外，将发现如何将外部依赖项（如第三方库、测试框架、程序分析工具和文档生成器），进而整合到自己的项目中。最后，将学习如何导出、安装和打包解决方案，以供内部和外部使用。

完成这本书后，你将能以专业水平使用CMake。

\mySubsectionNoFile{}{适读人群}

学会了C++之后，很快就会发现，仅仅掌握语言本身并不足以以最高标准交付项目。这本书填补了这一空白：它面向任何渴望成为更好的软件开发者，甚至专业构建工程师的人！如果想要从零开始学习现代CMake或提升和更新自己的CMake技能，阅读这本书吧。它将帮助你了解如何制作顶级的C++项目，并从其他构建环境中过渡。

\mySubsectionNoFile{}{关于本书}

第1章，\textit{CMake入门}，包括CMake的安装、命令行界面的使用，并介绍了CMake项目所需的基本构建块。

第2章，\textit{CMake语言}，包括CCMake语言的基本概念，包括命令调用、参数、变量、控制结构和注释。

第3章，\textit{主流IDE中使用CMake}，强调了集成开发环境（IDE）的重要性，指导读者选择IDE，并为Clion、Visual Studio Code和Visual Studio IDE为例，提供设置和说明。

第4章，\textit{开启第一个CMake项目}，了解如何在顶层文件中配置基本的CMake项目，结构化文件树，并准备必要的工具链进行开发。

第5章，\textit{了解目标}，探讨了逻辑构建目标的概念，理解它们的属性和不同类型，并学习如何为CMake项目自定义命令。

第6章，\textit{生成器表达式}，解释了生成器表达式的目的和语法，包括如何使用它们进行条件扩展、查询和转换。

第7章，\textit{编译C++源代码}，深入探讨了编译过程，配置预处理器和优化器，并了解减少构建时间和提高调试的技术。

第8章，\textit{链接可执行文件和库}，理解链接机制，不同类型的库，单一定义规则，链接顺序，以及如何准备测试。

第9章，\textit{CMake中管理依赖项}，了解如何管理第三方库，为那些缺乏CMake支持的库添加支持，并从互联网上获取外部依赖。

第10章，\textit{使用C++20模块}，介绍了C++20模块，展示了如何在CMake中启用，并相应地配置工具链。

第11章，\textit{测试框架}，理解自动化测试的重要性，利用CMake内置的测试支持，并使用主流框架开始单元测试。

第12章，\textit{程序分析工具}，了解如何自动格式化源代码，并在构建时间和运行时检测软件错误。

第13章，\textit{生成文档}，如何使用Doxygen从源代码自动创建文档，并添加样式以增强文档外观。

第14章，\textit{安装和打包}，如何对项目进行发布，无论是否安装，创建可重用包，并为打包指定单个组件。

第15章，\textit{创建专业项目}，应用本书所学到的所有知识来开发一个全面、专业级别的项目。

第16章，\textit{编写CMake预设}，将高级项目配置封装到使用CMake预设文件的工作流程中，使项目设置和管理更加高效。

附录 - \textit{其他命令}，作为与字符串、列表、文件和数学运算相关的各种CMake命令的参考。

\mySubsectionNoFile{}{如何阅读}

本书假设你对C++和类Unix系统有基本的熟悉。尽管Unix知识不是严格的要求，但它将有助于理解本书中给出的示例。

本书的目标是CMake 3.26，但这里描述的大多数技术应该适用于CMake 3.15（之后添加的功能通常会突出显示）。有些章节已经更新到CMake 3.28，以涵盖最新功能。

运行示例的环境准备在第1-3章中介绍，如果熟悉这个工具，推荐使用本书提供的Docker镜像。

\mySubsectionNoFile{}{下载示例}

本书的代码托管在GitHub上，地址为\url{https://github.com/PacktPublishing/Modern-CMake-for-Cpp-2E}。我们还有其他丰富的书籍和视频代码包，也可在GitHub中找到，地址为：\url{https://github.com/PacktPublishing/}。去看看吧！

\mySubsectionNoFile{}{下载彩图}

我们还提供了一个PDF文件，其中包含了本书中使用的屏幕截图/图表的彩色图片。可以在这里下载： \url{https://packt.link/gbp/9781805121800}

\mySubsectionNoFile{}{内容约定}

本书中使用了一些文本约定。

代码块如下设置：

\begin{cmake}
cmake_minimum_required(VERSION 3.26)
project(Hello)
add_executable(Hello hello.cpp)
\end{cmake}

命令行输入或输出如下：

\begin{shell}
cmake --build <dir> --parallel [<number-of-jobs>]
cmake --build <dir> -j [<number-of-jobs>]
\end{shell}

\begin{myNotic}{Note}
警告或重要注释
\end{myNotic}

\begin{myTip}{Tip}
提示和技巧
\end{myTip}






